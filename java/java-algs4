#!/bin/bash

# # sets the path to the textbook libraries
CLASSPATH="./lib/algs4.jar"

# Execute on Windows/Linux using "java" but on OS X using "java_home -exec java"
JAVA="java"
if [ -f /usr/libexec/java_home ]; then
    JAVA="/usr/libexec/java_home -exec java"
fi

# Check if the first argument is "compile"
if [ "$1" == "compile" ]; then
    shift
    $JAVA -classpath "${CLASSPATH}" "$@"
    exit 0
fi

# Compiling the source files
SRC_DIR="src"
OUT_DIR="out"

# Create the output directory if it does not exist
mkdir -p ${OUT_DIR}

# Compile the Java files
find ${SRC_DIR} -name "*.java" | xargs javac -d ${OUT_DIR} -classpath "${CLASSPATH}"

# Check if the compilation was successful
if [ $? -ne 0 ]; then
    echo "Compilation failed."
    exit 1
fi

# Executes with the textbook libraries in the classpath
$JAVA -classpath "${OUT_DIR}:${CLASSPATH}" "$@"